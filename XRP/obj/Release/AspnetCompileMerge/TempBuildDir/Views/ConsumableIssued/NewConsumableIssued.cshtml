@model XRP.Models.ssmtbl_ConsumablesIssuedModel
@{
    ViewBag.Title = "Goods Issued";
    ViewBag.Active = "Stock";
    Layout = "~/Views/Shared/_DesignLayout.cshtml";
}

<link href="~/Content/Validations/jquery-ui.css" rel="stylesheet" />

@using (Html.BeginForm("NewConsumableIssued", "ConsumableIssued", FormMethod.Post, new { @class = "form-horizontal", role = "form", enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true)

    <fieldset>
        <header class="blue accent-3 relative">
            <div class="container-fluid text-white">
                <div class="row p-t-b-10 ">
                    <div class="col">
                        <h4>
                            <i class="icon-database"></i>
                            Goods Issued
                        </h4>
                    </div>
                </div>
                <div class="row justify-content-between">
                    <ul class="nav nav-material nav-material-white responsive-tab" id="v-pills-tab" role="tablist">
                        <li>
                            <a class="nav-link" href='@Url.Action("ConsumableIssuedList", "ConsumableIssued")'><i class="icon icon-home2"></i> All Goods Issued</a>

                        </li>
                        <li class="float-right">
                            <a class="nav-link active" href='@Url.Action("NewConsumableIssued", "ConsumableIssued")'><i class="icon icon-plus-circle"></i> New Goods Issued</a>
                        </li>

                    </ul>
                </div>
            </div>

        </header>
        <div class="@ViewBag.HideClass" style="text-align:center">
            @ViewBag.Message
        </div>
        <div class="container-fluid animatedParent animateOnce">
            <div class="animated fadeInUpShort">
                <div class="row my-3">
                    <div class="col-md-12">
                        <form action="#">
                            <div class="card no-b  no-r">
                                <div class="card-body">
                                    <div class="form-row mt-1">
                                        <div class="form-group col-6 m-0">
                                            @Html.LabelFor(model => model.IssuedDate, new { @class = "Label" })

                                            @Html.TextBoxFor(model => model.IssuedDate, "{0:dd-MMM-yyyy}", new { @class = "date-time-picker form-control  r-0 light s-12" })                                           
                                            @Html.ValidationMessageFor(model => model.IssuedDate, null, new { @class = "alert-danger" })
                                        </div>
                                        <div class="form-group col-6 m-0">
                                            @Html.LabelFor(model => model.Code, new { @class = "Label" })

                                            @Html.TextBoxFor(model => model.Code, null, new { @class = "form-control  r-0 light s-12", @id = "txt_code" })
                                            @Html.ValidationMessageFor(model => model.Code, null, new { @class = "alert-danger" })
                                        </div>
                                     
                                    </div>
                                    <div class="form-row mt-1">
                                        <div class="form-group col-6 m-0">
                                            @Html.LabelFor(model => model.Description, new { @class = "Label" })

                                            @Html.TextBoxFor(model => model.Description, null, new { @class = "form-control  r-0 light s-12", @id = "txt_description" })
                                            @Html.ValidationMessageFor(model => model.Description, null, new { @class = "alert-danger" })
                                        </div>
                                        <div class="form-group col-6 m-0">
                                           @Html.LabelFor(model => model.BalanceQunatity, new { @class = "Label" })

                                        @Html.TextBoxFor(model => model.BalanceQunatity, null, new { @class = "form-control r-0 light s-12", @id = "txt_balanceQunatity" })
                                        @Html.ValidationMessageFor(model => model.BalanceQunatity, null, new { @class = "alert-danger" })
                                        </div>
                                       
                                    </div>
                                    <div class="form-row mt-1">
                                        <div class="form-group col-6 m-0">
                                            @Html.LabelFor(model => model.MinQty, new { @class = "Label" })

                                            @Html.TextBoxFor(model => model.MinQty, null, new { @class = "form-control r-0 light s-12" })
                                            @Html.ValidationMessageFor(model => model.MinQty, null, new { @class = "alert-danger" })
                                        </div>
                                        <div class="form-group col-6 m-0">
                                            @Html.LabelFor(model => model.IssuedQuantity, new { @class = "Label" })

                                            @Html.TextBoxFor(model => model.IssuedQuantity, null, new { @class = "form-control r-0 light s-12" })
                                            @Html.ValidationMessageFor(model => model.IssuedQuantity, null, new { @class = "alert-danger" })
                                        </div>

                                    </div>
                                    <div class="form-row mt-1">
                                        <div class="form-group col-6 m-0">
                                            @Html.Label("Issued To", new { @class = "Label" })
                                            @*@Html.LabelFor(model => model.IssuedTo, new { @class = "Label" })*@

                                            @Html.TextBoxFor(model => model.IssuedTo, null, new { @class = "form-control r-0 light s-12" })
                                            @Html.ValidationMessageFor(model => model.IssuedTo, null, new { @class = "alert-danger" })
                                        </div>
                                       

                                    </div>
                                </div>
                                <div class="card-body" align="right">
                                    <button type="submit" class="btn btn-primary btn-sm" id="Save" value="Save"><i class="icon-save mr-2"></i>Save</button>
                                    <button type="reset" class="btn btn-success btn-sm"><i class="icon-refresh mr-2"></i>Reset</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- PAGE TITLE -->
        @*<div class="page-title">
                <h2><span class="fa fa-arrow-circle-o-left"></span>New Consumable Issued</h2>
            </div>

            <div class="row">
                <div class="col-md-12">

                    <div class="col-md-9"></div>
                    <div class="col-md-3">
                        <div class="form-group" style="text-align:center">
                            <input type="button" class="btn btn-info" value="All ConsumableIssued List" onclick="location.href = '@Url.Action("ConsumableIssuedList", "ConsumableIssued")'" />
                        </div>
                    </div>
                </div>
            </div>*@

        @*<div class="row">
                <div class="col-md-12">
                    <div class="col-md-1"></div>

                    <div class="col-md-8">
                        <div class="form-group">
                            <div class="col-md-5 control-label">
                                @Html.LabelFor(model => model.IssuedDate, new { @class = "Label" })
                        
                                @Html.TextBoxFor(model => model.IssuedDate, "{0:dd-MMM-yyyy}", new { @class = "form-control NoStar datepicker" })
                                @Html.ValidationMessageFor(model => model.IssuedDate, null, new { @class = "alert-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-5 control-label">
                                @Html.LabelFor(model => model.Code, new { @class = "Label" })
                          
                                @Html.TextBoxFor(model => model.Code, null, new { @class = "form-control NoStar", @id = "txt_code"})
                                @Html.ValidationMessageFor(model => model.Code, null, new { @class = "alert-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-5 control-label">
                                @Html.LabelFor(model => model.Description, new { @class = "Label" })
                          
                                @Html.TextBoxFor(model => model.Description, null, new { @class = "form-control NoStar", @id = "txt_description" })
                                @Html.ValidationMessageFor(model => model.Description, null, new { @class = "alert-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-5 control-label">
                                @Html.LabelFor(model => model.BalanceQunatity, new { @class = "Label" })
                           
                                @Html.TextBoxFor(model => model.BalanceQunatity, null, new { @class = "form-control NoStar", @id = "txt_balanceQunatity" })
                                @Html.ValidationMessageFor(model => model.BalanceQunatity, null, new { @class = "alert-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-5 control-label">
                                @Html.LabelFor(model => model.MinQty, new { @class = "Label" })
                          
                                @Html.TextBoxFor(model => model.MinQty, null, new { @class = "form-control NoStar" })
                                @Html.ValidationMessageFor(model => model.MinQty, null, new { @class = "alert-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-5 control-label">
                                @Html.LabelFor(model => model.IssuedQuantity, new { @class = "Label" })
                           
                                @Html.TextBoxFor(model => model.IssuedQuantity, null, new { @class = "form-control NoStar" })
                                @Html.ValidationMessageFor(model => model.IssuedQuantity, null, new { @class = "alert-danger" })
                            </div>
                        </div>
                        <div class="form-group" style="display:none">
                            <div class="col-md-5 control-label">
                                @Html.LabelFor(model => model.IssuedTo, new { @class = "Label" })
                          
                                @Html.TextBoxFor(model => model.IssuedTo, null, new { @class = "form-control NoStar" })
                                @Html.ValidationMessageFor(model => model.IssuedTo, null, new { @class = "alert-danger" })
                            </div>
                        </div>

                    </div>
                    <div class="col-md-3"></div>
                </div>
            </div>*@
       
        @*<div class="row">
            <div class="col-md-12">
                <div class="form-group" style="text-align:center">
                    <input type="submit" name="Save" value="Save" class="btn btn-success btn-default" id="Save" />
                    <input type="button" name="Save" value="Reset" class="btn btn-warning btn-default" onclick="location.href = '@Url.Action("NewConsumableIssued", "ConsumableIssued")    '" />

                </div>
            </div>
        </div>*@
    </fieldset>

     <script type="text/javascript" src="~/Scripts/jquery-1.10.2.js"></script>    
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>    
    <script src="~/Content/Validations/JqueryUi.js"></script>
    <script>
    var $j = jQuery.noConflict(true);
    </script>
    <script type="text/javascript">

        $(document).ready(function () {
            $(function () {
                $('.date-time-picker').datetimepicker({
                    format: 'd/m/Y',
                    timepicker: false
                });
            });
            $j("#txt_code").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: "../ConsumableIssued/GetItemsByCode",
                        type: "POST",
                        dataType: "json",
                        data: { Prefix: request.term },
                        success: function (data) {
                           // response($.map(data, function (item) {
                            //return {label: item.Code, value: item.Code, Description: item.Description, BalanceQunatity: item.BalanceQunatity };
                            $("#txt_code").val(data[0].Code); 
                            $("#txt_description").val(data[0].Description);
                            $("#txt_balanceQunatity").val(data[0].BalanceQunatity);
                            //}))
                        }
                    })
                },              
                minLength: 1
                //,
                //change: function (event, ui) {
                //    $(this).val((ui.item ? ui.item.label : ""));
                //}
            });
        });
    </script>
}

