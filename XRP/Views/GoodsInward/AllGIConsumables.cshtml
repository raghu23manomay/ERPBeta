@model XRP.Models.Paged_ssmtbl_VendorPurchaseOrderModel

<style>
    .icon:hover, td:hover {
        cursor: pointer;
    }

    #btnSubmit {
        position: absolute;
        bottom: 4%;
        right: 5%;
    }

    #btnPrintDC {
        position: absolute;
        bottom: 6%;
        right: 3%;
    }

    #btnViewPrint {
        position: absolute;
        bottom: 10%;
        left: 35%;
    }
</style>
<link href="~/Content/Validations/jquery-ui.css" rel="stylesheet" />

@Html.HiddenFor(model => model.ginNumber, new { @id = "hdnGINNumber" })
<input type="hidden" id="hdnPOID" />
<input type="hidden" id="hdnPartyType" />
<input type="hidden" id="hdnOrderQty" />
<input type="hidden" id="hdnginStatus" />
<input type="hidden" id="hdntotalReceivedQty" />
<div class="panel panel-default">

    <header class="blue accent-3 relative">
        <div class="container-fluid text-white">

        </div>
    </header>
    <div class="container-fluid">
        <div class="card shadow b-0">
            <div class="row no-gutters">
                <div class="col-md-3 d-none d-md-block text-truncate white b-r white sticky" style="">
                    <div class="slimScroll" data-height="600">
                        @*<div class="slimScroll" data-height="600">*@
                        <ul class="list-unstyled">
                            <li>
                                <table class="table table-bordered table-hover">
                                    <thead>
                                        <tr>
                                            <th>
                                                <font size="4px">Goods Inwards</font>

                                                <input type="text" class="" id="txt_search" style="display:none;width:20%;height:5%" />
                                                <i class="icon-search" onclick="search();"></i>
                                                <br />
                                                <div class="float-left" data-toggle="popover" tabindex="4" data-trigger="focus" data-content='All Goods Inwards' title="Goods Inwards Type">
                                                    <a href="@Url.Action("AllGoodsInward", "GoodsInward")?_inward_type=AllGI" class="" title="View Purchase Order" readonly="readonly">
                                                        <span class="icon icon-circle s-12  mr-1 text-danger" title="All Goods Inwards"></span>
                                                    </a>
                                                </div>

                                                <div class="float-left" data-toggle="popover" tabindex="3" data-trigger="focus" data-content='Outsourcing' title="Goods Inwards Type">
                                                    <a href="@Url.Action("AllGoodsInward", "GoodsInward")?_inward_type=Outsourcing" class="" title="View Purchase Order" readonly="readonly">
                                                        <span class="icon icon-circle s-12  mr-1 text-success" title="Outsourcing"></span>
                                                    </a>
                                                </div>
                                                <div class="float-left" data-toggle="popover" tabindex="2" data-trigger="focus" data-content='Maintainance Spares' title="Goods Inwards Type">
                                                    <a href="@Url.Action("AllGoodsInward", "GoodsInward")?_inward_type=Maintainance Spares" class="" title="View Purchase Order" readonly="readonly">
                                                        <span class="icon icon-circle s-12  mr-1 text-primary" title="Maintainance Spares"></span>
                                                    </a>
                                                </div>
                                                <div class="float-left" data-toggle="popover" tabindex="1" data-trigger="focus" data-content='Raw Material' title="Goods Inwards Type">
                                                    <a href="@Url.Action("AllGoodsInward", "GoodsInward")?_inward_type=Raw Material" class="" title="View Purchase Order" readonly="readonly">
                                                        <span class="icon icon-circle s-12  mr-1 text-secondary" title="Raw Material"></span>
                                                    </a>
                                                </div>
                                                <div class="float-left" data-toggle="popover" data-content='Consumables' tabindex="0" data-trigger="focus" title="Goods Inwards Type">
                                                    <a href="@Url.Action("AllGoodsInward", "GoodsInward")?_inward_type=Consumables" class="" title="View Purchase Order" readonly="readonly">
                                                        <span class="icon icon-circle s-12  mr-1 text-warning" title="Consumables"></span>
                                                    </a>
                                                </div>
                                            </th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var data in Model.ssmtbl_VendorPurchaseOrderModelList)
                                        {
                                            <tr class="trDelivery">
                                                <td style="display:none" class="ftd"><input type="hidden" value="@data.vpo_id" class="poid" /></td>
                                                <td style="display:none" class="ftd"><input type="hidden" value="@data.cstpo_id" class="poid" /></td>
                                                <td style="display:none" class="ftd1"><input type="hidden" value="@data.vendor_po_type" class="DeliveryChallanType" /></td>
                                                <td style="display:none" class="partyType"><input type="hidden" value="@data.PartyTYpe" class="PartyTYpe" /></td>

                                                <td>
                                                    @*<a href="@Url.Action("AllDCJobDispatch", "DeliveryChallan")?DispatchNo=@data.dispatch_no" class="" title="Delivery Challan">*@
                                                    @*<a href="javascript:myFunction($(dispatchid1).val())">*@
                                                    @if (@data.PartyTYpe == "V")
                                                    {
                                                        <div>
                                                            @if (@data.vendor_po_type == "Consumables")
                                                            {
                                                                <div class="avatar avatar-md mr-3 mt-1 float-left">

                                                                    <span class="avatar-letter avatar-letter-v avatar-md circle" style="background-color:#FCCE54"></span>
                                                                </div>
                                                                <div>
                                                                    <h6 class="mt-0 mb-1 font-weight-normal">@data.vendor_name</h6>

                                                                </div>
                                                            }
                                                            else if (@data.vendor_po_type == "Raw Material")
                                                            {
                                                                <div class="avatar avatar-md mr-3 mt-1 float-left">

                                                                    <span class="avatar-letter avatar-letter-v avatar-md circle" style="background-color:#6c757d"></span>
                                                                </div>
                                                                <div>

                                                                    <h6 class="mt-0 mb-1 font-weight-normal">@data.vendor_name</h6>
                                                                </div>
                                                            }
                                                            else if (@data.vendor_po_type == "Maintainance Spares")
                                                            {
                                                                <div class="avatar avatar-md mr-3 mt-1 float-left">

                                                                    <span class="avatar-letter avatar-letter-v avatar-md circle" style="background-color:#03a9f4"></span>
                                                                </div>
                                                                <div>
                                                                    <h6 class="mt-0 mb-1 font-weight-normal">@data.vendor_name</h6>

                                                                </div>
                                                            }
                                                            else if (@data.vendor_po_type == "Outsourcing")
                                                            {
                                                                <div class="avatar avatar-md mr-3 mt-1 float-left">

                                                                    <span class="avatar-letter avatar-letter-v avatar-md circle" style="background-color:#7dc855"></span>
                                                                </div>
                                                                <div>
                                                                    <h6 class="mt-0 mb-1 font-weight-normal">@data.vendor_name</h6>

                                                                </div>
                                                            }

                                                            else { }
                                                            @if (@data.vendor_po_type == "Consumables")
                                                            {

                                                                if (@data.po_no != "")
                                                                {

                                                                    <small style="color:grey" title="Approval Date">@data.po_date.ToString("dd-MMM-yyyy") &nbsp;</small>
                                                                    <small style="color:grey" title="VPO No"> | &nbsp; @data.po_no</small>
                                                                }

                                                                else
                                                                {

                                                                    <small style="color:grey" title="Approval Date">@data.po_date.ToString("dd-MMM-yyyy") &nbsp;</small>
                                                                    <small style="color:grey" title="VPO No"> | &nbsp; NA</small>
                                                                }
                                                            }


                                                            else if (@data.vendor_po_type == "Raw Material")
                                                            {
                                                                if (@data.po_no != "")
                                                                {

                                                                    <small style="color:grey" title="Approval Date">@data.po_date.ToString("dd-MMM-yyyy") &nbsp;</small>
                                                                    <small style="color:grey" title="VPO No"> | &nbsp; @data.po_no</small>
                                                                }

                                                                else
                                                                {

                                                                    <small style="color:grey" title="Approval Date">  @data.po_date.ToString("dd-MMM-yyyy") &nbsp;</small>
                                                                    <small style="color:grey" title="VPO No"> | &nbsp;NA</small>
                                                                }

                                                            }
                                                            else if (@data.vendor_po_type == "Maintainance Spares")
                                                            {
                                                                if (@data.po_no != "")
                                                                {

                                                                    <small style="color:grey" title="Approval Date"> @data.po_date.ToString("dd-MMM-yyyy") &nbsp;</small>
                                                                    <small style="color:grey" title="VPO No"> | &nbsp; @data.po_no</small>
                                                                }

                                                                else
                                                                {

                                                                    <small style="color:grey" title="Approval Date"> @data.po_date.ToString("dd-MMM-yyyy") &nbsp;</small>
                                                                    <small style="color:grey" title="VPO No"> | &nbsp; NA</small>
                                                                }

                                                            }
                                                            else if (@data.vendor_po_type == "Outsourcing")
                                                            {
                                                                if (@data.po_no != "")
                                                                {

                                                                    <small style="color:grey" title="Approval Date">@data.po_date.ToString("dd-MMM-yyyy") &nbsp;</small>
                                                                    <small style="color:grey" title="VPO No"> | &nbsp;@data.po_no</small>
                                                                }

                                                                else
                                                                {

                                                                    <small style="color:grey" title="Approval Date"> @data.po_date.ToString("dd-MMM-yyyy") &nbsp;</small>
                                                                    <small style="color:grey" title="VPO No"> | &nbsp;NA</small>
                                                                }
                                                            }


                                                            else { }
                                                        </div>

                                                    }

                                                    else
                                                   if (@data.PartyTYpe == "C")
                                                    {

                                                        <div>
                                                            <div class="avatar avatar-md mr-3 mt-1 float-left">

                                                                <span class="avatar-letter avatar-letter-c avatar-md circle" style="background-color:#FCCE54"></span>
                                                            </div>
                                                            <div class="text-truncate">

                                                                <h6 class="mt-0 font-weight-normal">@data.customerName</h6>
                                                            </div>
                                                            <small style="color:grey" title="Dia Number">@data.dia_no &nbsp;</small>
                                                            <small style="color:grey" title="Customer PO No"> | &nbsp; @data.po_no</small>
                                                        </div>
                                                    }
                                                    else
                                                    {

                                                    }
                                                </td>
                                            </tr>

                                        }
                                    </tbody>


                                </table>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-9 col-sm-12 white" id="tabDetails">
                    <div class="m-md-2">
                        <div class="card b-0 m-2">
                            <div class="card-header white">
                                <div class="d-flex justify-content-between">

                                    <div class="align-self-end float-right">
                                        <ul class="nav nav-tabs card-header-tabs nav-material">
                                            <li class="nav-item">

                                                <a class="nav-link active show" id="w3--tab1" data-toggle="tab" href="#w3-tab1" role="tab" aria-controls="tab1" aria-expanded="true" aria-selected="true">Details</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="w3--tab2" data-toggle="tab" href="#w3-tab2" role="tab" aria-controls="tab2" aria-selected="false" style="display:none">Attchments</a>

                                            </li>

                                        </ul>
                                    </div>

                                    <div class="align-self-end float-right">

                                        <input type="hidden" id="hdnChalnDCType" />

                                        <h5>
                                            <span class="r-3 badge badge-primary" style="width:100%;color:white;font-size:90%" id="spnChallanType">

                                                <b id="ChallanType"> </b>


                                            </span>
                                        </h5>
                                    </div>
                                </div>

                            </div>

                            <div class="card-body no-p">
                                <div class="tab-content">
                                    <div class="tab-pane fade show active" id="w3-tab1" role="tabpanel" aria-labelledby="w3-tab1" data-height="100%">
                                        @*<div class="card-body  chat-widget p-3">*@
                                        <div class="w-body w-scroll ">
                                            <ul class="list-unstyled">
                                                <li>
                                                    @*@Html.HiddenFor(model => model.dispatch_char, new { @id = "dispatch_char" })
                                            @Html.HiddenFor(model => model.dispatch_id, new { @id = "dispatch_id" })*@
                                                    @* New DC Job Dispatch *@
                                                    <div id="#message1">
                                                        <div class="container-fluid animatedParent animateOnce" id="divVendor" style="display:none;">
                                                            <div class="">
                                                                <form action="#">
                                                                    <div class="card no-b  no-r">
                                                                        <div class="card-body">
                                                                            <div>
                                                                                <div class="form-row mt-1 m-1">

                                                                                    <div class="media">
                                                                                        <div class="float-left">
                                                                                            @*<img class="d-flex mr-3 height-50" src="~/assets/img/dummy/u1.png" alt="Generic placeholder image">*@
                                                                                            <i class="icon icon-inbox-document-text  blue-text s-48 mr-2"></i>

                                                                                        </div>

                                                                                        <div class="media-body text-truncate">

                                                                                            <h6 class="mt-0 mb-1 font-weight-normal" title="Vendor Name" id="vendorName"></h6>




                                                                                            <span style="padding-bottom:0">
                                                                                                <label>Purchase Order #</label>  <strong id="pono" class="Label"></strong> &nbsp;
                                                                                                <label>| Date :</label>  <strong id="poDate" class="Label"></strong> &nbsp;
                                                                                                <label> | Grade:</label> &nbsp;<label id="lblGrade" class="Label" title="Grade"></label>&nbsp;

                                                                                                <label> | Section :</label>  <label id="lblSection" class="Label" title="Section"></label><br />
                                                                                                <label>GIN No:</label> <label class="Label" id="ginNo"></label> |
                                                                                                <label>GIN Date:</label> <label class="Label" id="ginDate"></label>
                                                                                            </span>



                                                                                        </div>
                                                                                        <div class="float-right">
                                                                                            <i class="icon icon-paperclip2 s-48 mr-2" id="attchment" title="Attach your files here..."></i>
                                                                                            @*<i class="icon icon-attach_file s-48 mr-2" id="attchment" title="Attach your files here..."></i>*@
                                                                                        </div>
                                                                                    </div>


                                                                                </div>



                                                                                <div class="form-row mt-1 m-2">
                                                                                    @*<div class="form-group col-2 m-0">

                                                                                Heat Code:
                                                                            </div>
                                                                            <div class="form-group col-2 m-0">
                                                                                <input type="text" class="form-control r-0 light s-12" id="txtheatcode" />
                                                                            </div>*@
                                                                                    <div class="form-group col-3 m-0">
                                                                                        Challan No:

                                                                                    </div>
                                                                                    <div class="form-group col-3 m-0">
                                                                                        <input type='text' class='form-control r-1 light s-12' id="challanNo" />

                                                                                    </div>

                                                                                    <div class="form-group col-3 m-0">
                                                                                        Invoice No:

                                                                                    </div>
                                                                                    <div class="form-group col-3 m-0">
                                                                                        <input type="text" class="form-control r-1 light s-12" id="invoiceNo" />

                                                                                    </div>


                                                                                </div>

                                                                                <div class="form-row mt-1 m-2">



                                                                                </div>
                                                                                <div class="form-row mt-1 m-2">
                                                                                    <div class="form-group col-3 m-0">
                                                                                        Mode Of Transport:

                                                                                    </div>
                                                                                    <div class="form-group col-6 m-0">
                                                                                        <div class="custom-control custom-radio custom-control-inline">
                                                                                            <input type="radio" name="ModeOfTransport" id="ModRoad" class="custom-control-input" value="Road" />
                                                                                            <label class="custom-control-label m-0 Label" for="ModRoad">Road</label>
                                                                                        </div>
                                                                                        <div class="custom-control custom-radio custom-control-inline">
                                                                                            <input type="radio" class="custom-control-input" name="ModeOfTransport" id="ModCourier" value="Courier" />
                                                                                            <label class="custom-control-label m-0 Label" for="ModCourier">Courier</label>
                                                                                        </div>
                                                                                        <div class="custom-control custom-radio custom-control-inline">
                                                                                            <input type="radio" class="custom-control-input" name="ModeOfTransport" id="ModHandCarriedBy" value="By Hand" />
                                                                                            <label class="custom-control-label m-0 Label" for="ModHandCarriedBy">By Hand</label>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group col-3 m-0" id="vehicleNo" style="display:none">
                                                                                        <input type="text" class="form-control r-1 light s-12" id="txtvehicleNo" placeholder="Vehicle No." />

                                                                                    </div>

                                                                                    <div class="form-group col-3 m-0" style="display:none" id="courierTrackerId">
                                                                                        <input type="text" class="form-control r-1 light s-12" id="txtcourierTrackerId" placeholder="Courier Tracker Id" />

                                                                                    </div>

                                                                                    <div class="form-group col-3 m-0" id="personName" style="display:none">
                                                                                        <input type="text" class="form-control r-1 light s-12" id="txtpersonName" placeholder="Person Name" />

                                                                                    </div>


                                                                                </div>
                                                                                @*<div class="form-row mt-1 m-2" id="divModeOfTransport">
                                                                            <div class="form-group col-3 m-0" id="lblvehicleNo" style="display:none">
                                                                                Vehicle No.:

                                                                            </div>
                                                                            <div class="form-group col-3 m-0" id="vehicleNo" style="display:none">
                                                                                <input type="text" class="form-control r-0 light s-12" id="txtvehicleNo" placeholder="Vehicle No." />

                                                                            </div>
                                                                            <div class="form-group col-3 m-0" id="lblcourierTrackerId" style="display:none">
                                                                                Courier Tracker Id:

                                                                            </div>
                                                                            <div class="form-group col-3 m-0" style="display:none" id="courierTrackerId">
                                                                                <input type="text" class="form-control r-0 light s-12" id="txtcourierTrackerId" />

                                                                            </div>
                                                                            <div class="form-group col-3 m-0" id="lblpersonName" style="display:none">
                                                                                Person Name:

                                                                            </div>
                                                                            <div class="form-group col-3 m-0" id="personName" style="display:none">
                                                                                <input type="text" class="form-control r-0 light s-12" id="txtpersonName" />

                                                                            </div>
                                                                        </div>*@

                                                                                <div class="form-row mt-1 m-0">

                                                                                    <div class="form-group col-12 m-0">
                                                                                        Item Details:
                                                                                        <div class="card-body p-0 bg-light slimScroll" data-height="150" style="overflow: hidden; width: auto; height: 150px;">
                                                                                            <div class="table-responsive">
                                                                                                <table class="table table-bordered table-condensed">
                                                                                                    <thead>
                                                                                                        <tr>
                                                                                                            <th>Description</th>
                                                                                                            <th>Ordered&nbsp;Qty (Kgs)</th>
                                                                                                            <th>Ordered&nbsp;Qty (Tonnes)</th>
                                                                                                            <th>Challan&nbsp;Qty (Tonnes)</th>
                                                                                                            <th>Received&nbsp;Qty (Tonnes)</th>
                                                                                                            <th style='display:none'>Accepted&nbsp;Qty (Tonnes)</th>
                                                                                                            <th>Remark</th>
                                                                                                            <th>Heat&nbsp;Code</th>
                                                                                                            <th>Heat&nbsp;No</th>
                                                                                                        </tr>
                                                                                                    </thead>
                                                                                                    <tbody id="tbodymaintable"></tbody>
                                                                                                </table>

                                                                                            </div>

                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                @*<div class="form-row mt-1 m-0" style="max-height:150px; overflow:hidden;" id="processing">
                                                                            <div class="col-md-12">

                                                                                <table class="table table-bordered" id="maintable">


                                                                                </table>

                                                                            </div>

                                                                        </div>*@

                                                                                <div class="form-row mt-1 m-2">
                                                                                    <div class="form-group col-3 m-0">
                                                                                        Documents Received:

                                                                                    </div>
                                                                                    <div class="form-group col-9 m-0">
                                                                                        <select class="select2" name="GIDocReceived[]" multiple="multiple" id="GINDOCReceived">
                                                                                            @for (int i = 0; i < Model.ssmtbl_GoodsInward_DocReceivedModel.Count; i++)
                                                                                        {

                                                                                                <option value="@Model.ssmtbl_GoodsInward_DocReceivedModel[i].doc_id" class="form-control r-0 light s-12">
                                                                                                    @Model.ssmtbl_GoodsInward_DocReceivedModel[i].doc_name
                                                                                                </option>

                                                                                        }

                                                                                        </select>

                                                                                    </div>

                                                                                </div>

                                                                                <div class="form-row mt-1 m-2">
                                                                                    <div class="form-group col-3 m-0">
                                                                                        Comment:

                                                                                    </div>
                                                                                    <div class="form-group col-9 m-0">
                                                                                        <textarea id="txtComment" class="form-control r-0 light s-12 "></textarea>

                                                                                    </div>

                                                                                </div>



                                                                            </div>
                                                                        </div>

                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>

                                                        <div class="container-fluid animatedParent animateOnce" id="divCustomer" style="display:none;">
                                                            <div class="">
                                                                <form action="#">
                                                                    <br />
                                                                    &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
                                                                    GIN No: &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
                                                                    &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;
                                                                    <label class="Label" id="ginNo1"></label>
                                                                    <div class="card no-b  no-r">
                                                                        <div class="card-body">
                                                                            <div class="form-row mt-1 m-2">


                                                                                <div class="form-group col-3 m-0">
                                                                                    PO No:

                                                                                </div>
                                                                                @*@Html.HiddenFor(model => model.customer_id, new { @class = "customer_id" })*@
                                                                                <div class="form-group col-3 m-0">

                                                                                    <label id="Customerpono" class="Label"></label>
                                                                                </div>

                                                                                <div class="form-group col-3 m-0">
                                                                                    PO Date:
                                                                                </div>
                                                                                <div class="form-group col-3 m-0">
                                                                                    <label class="Label" id="cstpoDate"></label>
                                                                                </div>

                                                                            </div>
                                                                            <div class="form-row mt-1 m-2">

                                                                                <div class="form-group col-3 m-0">

                                                                                    Die Number:

                                                                                </div>
                                                                                <div class="form-group col-3 m-0">


                                                                                    <label class="Label" id="cstDieNumber"></label>


                                                                                </div>
                                                                                <div class="form-group col-3 m-0">
                                                                                    Customer Name:

                                                                                </div>
                                                                                <div class="form-group col-3 m-0">

                                                                                    <label class="Label" id="customerName"></label>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-row mt-1 m-2">

                                                                                <div class="form-group col-3 m-0">
                                                                                    PO Quantity:

                                                                                </div>
                                                                                <div class="form-group col-3 m-0">

                                                                                    <label class="Label" id="cstpo_qty"></label>
                                                                                </div>
                                                                                <div class="form-group col-3 m-0">
                                                                                    Received Quantity:


                                                                                </div>
                                                                                <div class="form-group col-3 m-0">
                                                                                    <input type="text" id="txt_customerreceivedquantity" class="form-control r-1 light s-12 Float-Number" />
                                                                                    @*<label class="Label" id="cstTask"></label>*@

                                                                                </div>
                                                                            </div>
                                                                            @*<div class="form-row mt-1 m-2">
                                                                        <div class="form-group col-3 m-0">
                                                                            Part Description:

                                                                        </div>
                                                                        <div class="form-group col-3 m-0">

                                                                            <label class="Label" id="partDescription"></label>
                                                                        </div>
                                                                        <div class="form-group col-3 m-0">
                                                                            Dispatch Quantity:

                                                                        </div>
                                                                        <div class="form-group col-3 m-0">
                                                                            <input type="text" class="form-control r-0 light s-12" id="dispatch_qty" />

                                                                        </div>


                                                                    </div>*@




                                                                        </div>


                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                    @*</div>*@

                                    <div class="tab-pane fade text-center" id="w3-tab2" role="tabpanel" aria-labelledby="w3-tab2">
                                        <div class="page" id="printpdf">

                                            <div class="container">

                                                <div class="" id="footerAttachment">
                                                    <div class="col-md-12">
                                                        <div class="row">

                                                            <div class="control-group" id="fields">
                                                                <br />
                                                                <label class="control-label" for="field1">
                                                                    Drop Your Files Here...
                                                                </label>
                                                                <br />
                                                                <div>

                                                                    <div class="entry input-group col-xs-3">

                                                                        <input type="file" id="fileUpload" class="custom-file form-control r-1 light s-12" multiple />
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12">
                                                        <div class="row">
                                                            <div class="control-group" id="divUploadedFile">
                                                                <br />
                                                                <label class="control-label">
                                                                    Uploaded Files:
                                                                </label>
                                                                <br />
                                                                <div>

                                                                    <div class="entry input-group col-xs-3" id="">
                                                                        @*<div class="table-responsive">*@
                                                                        <table class="table table-condensed">
                                                                            <thead>
                                                                                @*<tr>
                                                                            <th>Sr. No.</th>
                                                                            <th>File</th>


                                                                        </tr>*@
                                                                            </thead>
                                                                            <tbody id="tbodyFileUploaded"></tbody>
                                                                        </table>

                                                                        @*</div>*@

                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    @*<ul class="mailbox-attachments clearfix">
                                                <li>
                                                    <span class="mailbox-attachment-icon">
                                                        <i class="icon-document-file-pdf text-danger"></i>
                                                    </span>
                                                    <div class="mailbox-attachment-info">
                                                        <a href="#" class="mailbox-attachment-name">
                                                            <i class="icon-paperclip"></i>
                                                            Sep2014-report.pdf
                                                        </a>
                                                        <a href="#" class="btn btn-success btn-xs float-right r-3"><i class="icon-cloud-download"></i></a>
                                                        <span class="mailbox-attachment-size">
                                                            1,245 KB
                                                        </span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <span class="mailbox-attachment-icon">
                                                        <i class="icon-document-file-doc text-primary"></i>
                                                    </span>
                                                    <div class="mailbox-attachment-info">
                                                        <a href="#" class="mailbox-attachment-name">
                                                            <i class="icon-paperclip"></i>
                                                            App Description.docx
                                                        </a>
                                                        <a href="#" class="btn btn-warning btn-xs float-right r-3"><i class="icon-cloud-download"></i></a>
                                                        <span class="mailbox-attachment-size">1,245 KB</span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <span class="mailbox-attachment-icon has-img">
                                                        <img src="~/assets/img/demo/portfolio/p1.jpg"
                                                             alt="Attachment">
                                                    </span>
                                                    <div class="mailbox-attachment-info">
                                                        <a href="#" class="mailbox-attachment-name">
                                                            <i class="icon-camera"></i>
                                                            photo1.png
                                                        </a>
                                                        <a href="#" class="btn btn-primary btn-xs float-right r-3"><i class="icon-cloud-download"></i></a>
                                                        <span class="mailbox-attachment-size">2.67 MB</span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <span class="mailbox-attachment-icon has-img">
                                                        <img src="~/assets/img/demo/portfolio/p2.jpg"
                                                             alt="">
                                                    </span>
                                                    <div class="mailbox-attachment-info">
                                                        <a href="#" class="mailbox-attachment-name">
                                                            <i class="icon-camera"></i>
                                                            photo2.png
                                                        </a>
                                                        <a href="#" class="btn btn-danger btn-xs float-right r-3"><i class="icon-cloud-download"></i></a>
                                                        <span class="mailbox-attachment-size">1.9 MB</span>
                                                    </div>
                                                </li>
                                            </ul>*@
                                                </div>


                                            </div>
                                        </div>


                                    </div>

                                </div>



                            </div>

                        </div>
                        <div class="" id="btnDiv">

                            @*<div id="divPrintView" class="custom-control-inline float-left">
                        <button type="button" class="btn btn-primary btn-sm" id="btnViewPrint" value="Update"><i class="icon-eye mr-2"></i>View</button>
                    </div>*@
                            <div id="submitDiv" class="custom-control-inline float-right">
                                <button type="button" class="btn btn-primary btn-sm" id="btnSubmit" value="Update"><i class="icon-save mr-2"></i>Generate</button>
                                @*<button type="button" class="btn btn-primary btn-sm" id="btnSubmitc" value="Update"><i class="icon-save mr-2"></i>Generate</button>*@
                            </div>
                            <div id="loaderDiv" style="display:none;" class="custom-control-inline float-right m-3">
                                <img src="~/NewCssAndTheme/img/ajax-loader.gif" />
                            </div>


                        </div>

                    </div>
                </div>
            </div>


            @*</div>
                </div>*@
        </div>
    </div>
</div>

<script type="text/javascript" src="~/Scripts/jquery-1.10.2.js"></script>

<script src="~/Scripts/jquery-1.10.2.min.js"></script>

<script src="~/Content/Validations/JqueryUi.js"></script>
<script type="text/javascript">
    var $j = jQuery.noConflict(true);

</script>

<script>
    $(function () {
        $(document).on('click', '.btn-add', function (e) {
            e.preventDefault();

            var controlForm = $('.controls:first'),
                currentEntry = $(this).parents('.entry:first'),
                newEntry = $(currentEntry.clone()).appendTo(controlForm);

            newEntry.find('input').val('');
            controlForm.find('.entry:not(:last) .btn-add')
                .removeClass('btn-add').addClass('btn-remove')
                .removeClass('btn-success').addClass('btn-danger')
                .html('<span class="icon icon-minus"></span>');
        }).on('click', '.btn-remove', function (e) {
            $(this).parents('.entry:first').remove();

            e.preventDefault();
            return false;
        });
    });
</script>
<script>
    $j("#attchment").click(function () {
        $("#btnSubmit").hide();
        $("#w3--tab2").show();
        $("#w3--tab2").click();
    });
</script>
<script>


    $j(document).ready(function () {

        $("#tabDetails").hide();
        $("#btnViewPrint").hide();
        $("#btnSubmit").hide();
        $("#spnChallanType").hide();
        document.body.style.overflow = 'hidden';
        $('[data-toggle="popover"]').popover({
            placement: 'top'
        });
    });
</script>
<script>

    $(".trDelivery").click(function () {

        window.scrollBy(0, 50); //for scroll top
        window.scrollBy(0, -50); //for scroll down
    });
</script>
<script type="text/javascript">

    $j(".trDelivery").click(function () {

        //$("#hdnGINNumber").val();
        $("#w3--tab1").click();
        $("#w3--tab2").hide();

        $("#ginNo").text($("#hdnGINNumber").val());
        $("#ginNo1").text($("#hdnGINNumber").val());
        var d = new Date();
        var datestring = ("0" + d.getDate()).slice(-2) + "-" + ("0" + (d.getMonth() + 1)).slice(-2) + "-" +
        d.getFullYear();
        $("#ginDate").text(datestring);


        $(this).addClass("p-3 b-b light border-right border-primary");
        $(this).siblings().removeClass("p-3 b-b light border-right border-primary");

        $("#tabDetails").show();
        $("#spnChallanType").show();
        $("#btnDiv").show();
        $("#btnSubmit").show();
        var poid = $(this).closest("tr").find("td .poid").val();
        $("#hdnPOID").val(poid);
        var vendor_po_type = $(this).closest("tr").find("td .DeliveryChallanType").val();
        var party = $(this).closest("tr").find("td .PartyTYpe").val();

        $("#hdnPartyType").val(party);
        $.ajax
                                  ({
                                      type: "POST",
                                      url: "../GoodsInward/GetOneGINDetails",
                                      data: JSON.stringify({
                                          POId: ' ' + poid + '', Party: '' + party + ''
                                      }),
                                      contentType: "application/json;charset=utf-8",
                                      //dataType: "json",
                                      success: function (data) {
                                          //document.getElementById('dispatch_qty').style.border = 'black';

                                          if (party == "C") {
                                              $j('#Customerpono').text(data.vendor_po_no);
                                              $j('#cstpoDate').text(jsondateformatconvert(data.date_of_arrival));
                                              $j('#customerName').text(data.Name);
                                              $j('#cstDieNumber').text(data.dieNumber);
                                              $j('#cstpo_qty').text(data.poQty);
                                              $j('#btnSubmit').show();
                                              // $j('#btnSubmitc').show();
                                              $j('#divCustomer').hide();
                                              $j('#divVendor').show();

                                              $j('#pono').text(data.vendor_po_no);
                                              $j('#poDate').text(jsondateformatconvert(data.date_of_arrival));
                                              $j('#vendorName').text(data.vendor_name);

                                              if (data.gin_number == "") {
                                                  $j('#ginNo').text($j('#hdnGINNumber').val());
                                              } else {
                                                  $j('#ginNo').text(data.gin_number);
                                              }

                                              if (data.created_on == "/Date(-62135596800000)/") {
                                                  var d = new Date();
                                                  var datestring = ("0" + d.getDate()).slice(-2) + "-" + ("0" + (d.getMonth() + 1)).slice(-2) + "-" +
                                                  d.getFullYear();
                                                  $j('#ginDate').text(datestring);
                                              } else { $j('#ginDate').text(jsondateformatconvert(data.created_on)); }

                                              $j('#txtheatcode').val(data.heatCode);
                                              $j('#challanNo').val(data.challan_no);
                                              $j('#invoiceNo').val(data.invoice_no);
                                              $j('#txtComment').val(data.comment);
                                              
                                              getitemdetails(poid);

                                              ////////////////////////
                                          } else {
                                              $j('#pono').text(data.vendor_po_no);
                                              $j('#poDate').text(jsondateformatconvert(data.date_of_arrival));
                                              $j('#vendorName').text(data.vendor_name);
                                              $j('#btnSubmit').show();
                                              //$j('#btnSubmitc').hide();
                                              $j('#divCustomer').hide();
                                              $j('#divVendor').show();
                                              if (data.gin_number == "") {
                                                  $j('#ginNo').text($j('#hdnGINNumber').val());
                                              } else {
                                                  $j('#ginNo').text(data.gin_number);
                                              }
                                              if (data.created_on == "/Date(-62135596800000)/") {
                                                  var d = new Date();
                                                  var datestring = ("0" + d.getDate()).slice(-2) + "-" + ("0" + (d.getMonth() + 1)).slice(-2) + "-" +
                                                  d.getFullYear();
                                                  $j('#ginDate').text(datestring);
                                              } else { $j('#ginDate').text(jsondateformatconvert(data.created_on)); }
                                              $j('#txtheatcode').val(data.heatCode);
                                              $j('#challanNo').val(data.challan_no);
                                              $j('#invoiceNo').val(data.invoice_no);
                                              $j('#txtComment').val(data.comment);
                                              getGinItemDetails(data.vendor_po_no);

                                          }
                                          $j("#po_qty").text(data.poQty);
                                          $j('#ChallanType').text(data.delivery_challan_type);
                                          $j('#hdnChalnDCType').text(data.delivery_challan_type);
                                          if (vendor_po_type == "Consumables") {
                                              var element = document.getElementById("spnChallanType");
                                              element.className = "r-3 badge badge-warning";

                                              $j('#spnChallanType').text("Consumables");

                                          }
                                          else if (vendor_po_type == "Raw Material") {
                                              var element = document.getElementById("spnChallanType");
                                              element.className = "r-3 badge badge-secondary";
                                              $j('#spnChallanType').text("Raw Material");
                                          }
                                          else if (vendor_po_type == "Outsourcing") {
                                              var element = document.getElementById("spnChallanType");
                                              element.className = "r-3 badge badge-success";
                                              $j('#spnChallanType').text("Outsourcing");
                                          }
                                          else if (vendor_po_type == "Maintainance Spares") {
                                              var element = document.getElementById("spnChallanType");
                                              element.className = "r-3 badge badge-primary";
                                              $j('#spnChallanType').text("Maintainance Spares");
                                          } else if (vendor_po_type == "") {
                                              var element = document.getElementById("spnChallanType");
                                              $("#spnChallanType").hide();
                                              //$("#btnSubmit").hide();

                                          }
                                          if (data.mode_of_transportation == "Road") {
                                              document.getElementById("ModRoad").checked = true;
                                              $j("#vehicleNo").show();
                                              $j("#personName").hide();
                                              $j("#courierTrackerId").hide();
                                              $j("#txtvehicleNo").val(data.vehicle_no);

                                          }
                                          else if (data.mode_of_transportation == "By Hand") {
                                              document.getElementById("ModHandCarriedBy").checked = true;
                                              $j("#vehicleNo").hide();
                                              $j("#personName").show();
                                              $j("#courierTrackerId").hide();
                                              $j("#txtpersonName").val(data.vehicle_no);
                                          }
                                          else if (data.mode_of_transportation == "Courier") {
                                              document.getElementById("ModCourier").checked = true;
                                              $j("#vehicleNo").hide();
                                              $j("#personName").hide();
                                              $j("#courierTrackerId").show();
                                              $j("#txtcourierTrackerId").val(data.vehicle_no);
                                          } else { }
                                      },
                                      error: function (err) {
                                          // alert('Error occured');
                                      }
                                  });
    });
</script>
<script>
    function search() {
        $("#txt_search").show();

    }
    function getitemdetails(poid) {
        var totalReceivedQty = 0;
        $.ajax
                                  ({
                                      type: "POST",
                                      url: "../GoodsInward/GetGINDetailsbyCPO",
                                      data: JSON.stringify({
                                          poid: ' ' + poid + ''
                                      }),
                                      contentType: "application/json;charset=utf-8",
                                      //dataType: "json",
                                      success: function (status) {
                                         // console.log(status);
                                          if (status != "") {
                                              $("#tbodymaintable").empty();
                                              for (var i = 0; i < status.length; i++) {
                                                  var recq = parseFloat(status[i].receivedQty);
                                                  totalReceivedQty = parseFloat(totalReceivedQty) + parseFloat(recq);

                                                  $("#hdntotalReceivedQty").val(totalReceivedQty);
                                                  if (status[i].count1 == 1) {
                                                      if (status[i].ginStatus == 1) {
                                                          $("#lblSection").text(status[i].section);
                                                          $("#lblGrade").text(status[i].grade);
                                                          $("#hdnOrderQty").val(status[i].qty);
                                                          $("#hdnginStatus").val(status[i].ginStatus);

                                                          tr = $('<tr />');
                                                          //tr.append("<td>" + (i + 1) + "</td>");
                                                          //tr.append("<td>'" + status[i].item_code+ "'</td>");
                                                          tr.append("<td>" + $("#lblSection").text() + '' + $("#lblGrade").text() + "</td>");
                                                          tr.append("<td align='center'>" + $("#hdnOrderQty").val() + "</td>");
                                                          tr.append("<td align='center'>" + $("#hdnOrderQty").val() / 1000 + "</td>");
                                                          tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                          tr.append("<td><input type='text' class='form-control r-1 light s-12' oninput='isRQtyMoreOQty(this)'/></td>");
                                                          tr.append("<td  align='center' style='display:none'><input type='text' class='form-control r-1 light s-12' /></td>");
                                                          tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                          tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                          tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                          $('#tbodymaintable').append(tr);
                                                      }
                                                      else {

                                                          $("#lblSection").text(status[i].section);
                                                          $("#lblGrade").text(status[i].grade);
                                                          $("#hdnOrderQty").val(status[i].qty);
                                                          $("#hdnginStatus").val(status[i].ginStatus);
                                                          //  alert(status[i].heat_code);
                                                          tr = $('<tr />');
                                                          //tr.append("<td>" + (i + 1) + "</td>");
                                                          //tr.append("<td>'" + status[i].item_code+ "'</td>");
                                                          //tr.append("<td>" + status[i].item_code + status[i].item_description + "</td>");
                                                          tr.append("<td>" + status[i].item_description + "</td>");
                                                          tr.append("<td align='center'>" + status[i].qty + "</td>");
                                                          tr.append("<td align='center'>" + (status[i].qty) / 1000 + "</td>");
                                                          tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12' value='" + status[i].challan_qty + "' style='border:0px; background-color:#F8F9F9' disabled='disabled' /></td>");
                                                          tr.append("<td align='center'><input type='text' class='form-control r-1 light s-12' value='" + status[i].receivedQty + "' style='border:0px; background-color:#F8F9F9' disabled='disabled'/></td>");
                                                          tr.append("<td  align='center' style='display:none'><input type='text' class='form-control r-1 light s-12' style='border:0px; background-color:#F8F9F9' disabled='disabled'/></td>");
                                                          tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12' value='" + status[i].reason + "' style='border:0px; background-color:#F8F9F9' disabled='disabled'/></td>");
                                                          tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12' value='" + status[i].heat_code + "' style='border:0px; background-color:#F8F9F9' disabled='disabled'/></td>");
                                                          tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12' value='" + status[i].heat_number + "' style='border:0px; background-color:#F8F9F9' disabled='disabled'/></td>");
                                                          $('#tbodymaintable').append(tr);
                                                          if (i == status.length - 1) {

                                                              $("#lblSection").text(status[i].section);
                                                              $("#lblGrade").text(status[i].grade);
                                                              $("#hdnOrderQty").val(status[i].qty);
                                                              $("#hdnginStatus").val(status[i].ginStatus);

                                                              tr = $('<tr />');
                                                              //tr.append("<td>" + (i + 1) + "</td>");
                                                              //tr.append("<td>'" + status[i].item_code+ "'</td>");
                                                              tr.append("<td>" + $("#lblSection").text() + '' + $("#lblGrade").text() + "</td>");
                                                              tr.append("<td align='center'>" + $("#hdnOrderQty").val() + "</td>");
                                                              tr.append("<td align='center'>" + $("#hdnOrderQty").val() / 1000 + "</td>");
                                                              tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                              tr.append("<td><input type='text' class='form-control r-1 light s-12' onfocusout='isRQtyMoreOQty(this)'/></td>");
                                                              tr.append("<td  align='center' style='display:none'><input type='text' class='form-control r-1 light s-12' /></td>");
                                                              tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                              tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                              tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                              $('#tbodymaintable').append(tr);
                                                          }
                                                      }
                                                  }
                                                  else {

                                                      $("#lblSection").text(status[i].section);
                                                      $("#lblGrade").text(status[i].grade);
                                                      $("#hdnOrderQty").val(status[i].qty);
                                                      $("#hdnginStatus").val(status[i].ginStatus);

                                                      tr = $('<tr />');
                                                      //tr.append("<td>" + (i + 1) + "</td>");
                                                      //tr.append("<td>'" + status[i].item_code+ "'</td>");
                                                      tr.append("<td>" + $("#lblSection").text() + '' + $("#lblGrade").text() + "</td>");
                                                      tr.append("<td align='center'>" + $("#hdnOrderQty").val() + "</td>");
                                                      tr.append("<td align='center'>" + $("#hdnOrderQty").val() / 1000 + "</td>");
                                                      tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                      tr.append("<td><input type='text' class='form-control r-1 light s-12' oninput='isRQtyMoreOQty(this)'/></td>");
                                                      tr.append("<td  align='center' style='display:none'><input type='text' class='form-control r-1 light s-12' /></td>");
                                                      tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                      tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                      tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                      $('#tbodymaintable').append(tr);

                                                  }
                                              }


                                          }
                                          //getDocReceived();
                                          getUploadedFiles();
                                      },
                                      error: function (err) {

                                      }
                                  });
    }
    function getUploadedFiles() {
        var ginNumber = $("#ginNo").text();
        $.ajax
                                      ({
                                          type: "POST",
                                          url: "../GoodsInward/getFileAttched",
                                          data: JSON.stringify({
                                              ginNumber: ' ' + ginNumber + ''
                                          }),
                                          contentType: "application/json;charset=utf-8",
                                          //dataType: "json",
                                          success: function (status) {
                                              if (status == "") {
                                                  $("#divUploadedFile").hide();
                                              }else{
                                              $("#tbodyFileUploaded").empty();
                                              //Append each row to html table
                                              for (var i = 0; i < status.length; i++) {
                                                  var filepath = (status[i].FilePath);
                                                  var file = filepath.split("GoodsInward/")[1];                                                 
                                                  tr = $('<tr />');                                                 
                                                  tr.append('<td>' + (i + 1) + '</td>');
                                                  tr.append('<td><div class="mailbox-attachment-info">' + file + '</div></td>');
                                                  tr.append('<td><a href="' + status[i].FilePath + '" class="btn btn-primary btn-xs float-right r-3" target="_blank" title="View File.."><i class="icon-eye"></i></a></td>');
                                                  $('#tbodyFileUploaded').append(tr);
                                              }
                                              }
                                              getDocReceived();
                                          }
                                      });
        
        //<div class="mailbox-attachment-info"><a href="#" class="mailbox-attachment-name"><i class="icon-paperclip"></i>Sep2014-report.pdf</a><a href="#" class="btn btn-success btn-xs float-right r-3"><i class="icon-cloud-download"></i></a></div>
    }
    function getGinItemDetails(vendor_po_no) {
        var totalReceivedQty = 0;
        $.ajax
                                   ({
                                       type: "POST",
                                       url: "../GoodsInward/GetGINDetailsbyVPO",
                                       data: JSON.stringify({
                                           vendorpono: ' ' + vendor_po_no + ''
                                       }),
                                       contentType: "application/json;charset=utf-8",
                                       //dataType: "json",
                                       success: function (status) {
                                           //console.log(status);
                                          
                                           if (status != "") {
                                               $("#tbodymaintable").empty();
                                               for (var i = 0; i < status.length; i++) {
                                                   var recq = parseFloat(status[i].receivedQty);
                                                   totalReceivedQty = parseFloat(totalReceivedQty) + parseFloat(recq);
                                                  
                                                   $("#hdntotalReceivedQty").val(totalReceivedQty);
                                                   if (status[i].count1 == 1) {
                                                       if (status[i].ginStatus == 1) {
                                                           $("#lblSection").text(status[i].section);
                                                           $("#lblGrade").text(status[i].grade);
                                                           $("#hdnOrderQty").val(status[i].qty);
                                                           $("#hdnginStatus").val(status[i].ginStatus);
                                                          
                                                           tr = $('<tr />');
                                                           //tr.append("<td>" + (i + 1) + "</td>");
                                                           //tr.append("<td>'" + status[i].item_code+ "'</td>");
                                                           tr.append("<td>" + $("#lblSection").text() + '' + $("#lblGrade").text() + "</td>");
                                                           tr.append("<td align='center'>" + $("#hdnOrderQty").val() + "</td>");
                                                           tr.append("<td align='center'>" + $("#hdnOrderQty").val() / 1000 + "</td>");
                                                           tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                           tr.append("<td><input type='text' class='form-control r-1 light s-12' oninput='isRQtyMoreOQty(this)'/></td>");
                                                           tr.append("<td  align='center' style='display:none'><input type='text' class='form-control r-1 light s-12' /></td>");
                                                           tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                           tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                           tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                           $('#tbodymaintable').append(tr);
                                                       }
                                                       else {
                                                         
                                                           $("#lblSection").text(status[i].section);
                                                           $("#lblGrade").text(status[i].grade);
                                                           $("#hdnOrderQty").val(status[i].qty);
                                                           $("#hdnginStatus").val(status[i].ginStatus);
                                                         //  alert(status[i].heat_code);
                                                           tr = $('<tr />');
                                                           //tr.append("<td>" + (i + 1) + "</td>");
                                                           //tr.append("<td>'" + status[i].item_code+ "'</td>");
                                                           //tr.append("<td>" + status[i].item_code + status[i].item_description + "</td>");
                                                           tr.append("<td>" + status[i].item_description + "</td>");
                                                           tr.append("<td align='center'>" + status[i].qty + "</td>");
                                                           tr.append("<td align='center'>" + (status[i].qty) / 1000 + "</td>");
                                                           tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12' value='" + status[i].challan_qty + "' style='border:0px; background-color:#F8F9F9' disabled='disabled' /></td>");
                                                           tr.append("<td align='center'><input type='text' class='form-control r-1 light s-12' value='" + status[i].receivedQty + "' style='border:0px; background-color:#F8F9F9' disabled='disabled'/></td>");
                                                           tr.append("<td  align='center' style='display:none'><input type='text' class='form-control r-1 light s-12' style='border:0px; background-color:#F8F9F9' disabled='disabled'/></td>");
                                                           tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12' value='" + status[i].reason + "' style='border:0px; background-color:#F8F9F9' disabled='disabled'/></td>");
                                                           tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12' value='"+status[i].heat_code+"' style='border:0px; background-color:#F8F9F9' disabled='disabled'/></td>");
                                                           tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12' value='" + status[i].heat_number + "' style='border:0px; background-color:#F8F9F9' disabled='disabled'/></td>");
                                                           $('#tbodymaintable').append(tr);
                                                           if (i == status.length - 1) {

                                                               $("#lblSection").text(status[i].section);
                                                               $("#lblGrade").text(status[i].grade);
                                                               $("#hdnOrderQty").val(status[i].qty);
                                                               $("#hdnginStatus").val(status[i].ginStatus);
                                                              
                                                               tr = $('<tr />');
                                                               //tr.append("<td>" + (i + 1) + "</td>");
                                                               //tr.append("<td>'" + status[i].item_code+ "'</td>");
                                                               tr.append("<td>" + $("#lblSection").text() + '' + $("#lblGrade").text() + "</td>");
                                                               tr.append("<td align='center'>" + $("#hdnOrderQty").val() + "</td>");
                                                               tr.append("<td align='center'>" + $("#hdnOrderQty").val() / 1000 + "</td>");
                                                               tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                               tr.append("<td><input type='text' class='form-control r-1 light s-12' onfocusout='isRQtyMoreOQty(this)'/></td>");
                                                               tr.append("<td  align='center' style='display:none'><input type='text' class='form-control r-1 light s-12' /></td>");
                                                               tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                               tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                               tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                               $('#tbodymaintable').append(tr);
                                                           }
                                                       }
                                                   }
                                                   else {

                                                       $("#lblSection").text(status[i].section);
                                                       $("#lblGrade").text(status[i].grade);
                                                       $("#hdnOrderQty").val(status[i].qty);
                                                       $("#hdnginStatus").val(status[i].ginStatus);
                                                       
                                                       tr = $('<tr />');
                                                       //tr.append("<td>" + (i + 1) + "</td>");
                                                       //tr.append("<td>'" + status[i].item_code+ "'</td>");
                                                       tr.append("<td>" + $("#lblSection").text() + '' + $("#lblGrade").text() + "</td>");
                                                       tr.append("<td align='center'>" + $("#hdnOrderQty").val() + "</td>");
                                                       tr.append("<td align='center'>" + $("#hdnOrderQty").val() / 1000 + "</td>");
                                                       tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                       tr.append("<td><input type='text' class='form-control r-1 light s-12' oninput='isRQtyMoreOQty(this)'/></td>");
                                                       tr.append("<td  align='center' style='display:none'><input type='text' class='form-control r-1 light s-12' /></td>");
                                                       tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                       tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                       tr.append("<td  align='center'><input type='text' class='form-control r-1 light s-12'/></td>");
                                                       $('#tbodymaintable').append(tr);

                                                   }
                                               }


                                           }
                                           //getDocReceived();
                                           getUploadedFiles();
                                       },
                                       error: function (err) {

                                       }
                                   });
    }
</script>
<script>

    function getDocReceived() {
        @*
        location.href="@Url.Action("getDocReceived", "GoodsInward")?ginNumber="+ginNumber;*@
        @*href="@Url.Action("DownloadLatestQuotationFromQuotationNo", "Quotation")?InquiryNo=ginNumber"*@
        //$.ajax
        //                              ({
        //                                  type: "POST",
        //                                  url: "../GoodsInward/getDocReceived",
        //                                  data: JSON.stringify({
        //                                      ginNumber: ' ' + ginNumber + ''
        //                                  }),
        //                                  contentType: "application/json;charset=utf-8",
        //                                  //dataType: "json",
        //                                  success: function (status) {
        //                                      console.log(status);
        //                                      for (var i = 0; i < status.length; i++) {
        //                                          var getDocReceived = document.getElementsByName('GIDocReceived[]')[0];
        //                                         // alert(status[i]);
        //                                          var drpval = ((Number(status[i])) - 1);
        //                                          strarray.push(drpval);

        //                                      }

        //                                  }
        //                              });

        @*
        var test = '@ViewData["docReceived"]';
       
        var ginNumber = $("#ginNo").text();
     
        href="@Url.Action("getDocReceived", "GoodsInward")";
        
        $("#GINDOCReceived").val(stringArray);*@
    }

</script>
<script>
    $j('#ModRoad').click(function () {
        $j('#lblvehicleNo').show();
        $j('#vehicleNo').show();
        $j('#lblcourierTrackerId').hide();
        $j('#courierTrackerId').hide();
        $j('#lblpersonName').hide();
        $j('#personName').hide();
    });
    $j('#ModCourier').click(function () {
        $('#lblvehicleNo').hide();
        $('#vehicleNo').hide();
        $('#lblcourierTrackerId').show();
        $('#courierTrackerId').show();
        $('#lblpersonName').hide();
        $('#personName').hide();
    });
    $j('#ModHandCarriedBy').click(function () {
        $('#lblvehicleNo').hide();
        $('#vehicleNo').hide();
        $('#lblcourierTrackerId').hide();
        $('#courierTrackerId').hide();
        $('#lblpersonName').show();
        $('#personName').show();
    });
</script>
<script>
    function isRQtyMoreOQty(qty) {
        var totalReceivedQty1 = 0;
        var currentRow = $(qty).closest("tr");
        var orderedQty = currentRow.find("td").eq(2).text();
        if ($("#hdntotalReceivedQty").val()!=0) {
            totalReceivedQty1 = $("#hdntotalReceivedQty").val();
            orderedQty = parseFloat((parseFloat(orderedQty).toFixed(2) - parseFloat(totalReceivedQty1).toFixed(2)).toFixed(2));
         //   alert(orderedQty);
        }
        //else {
            receivedQty = currentRow.find("td").eq(4).find(":text").val();
        //}

        var cmpre = parseFloat(parseFloat(orderedQty).toFixed(2) - parseFloat(receivedQty).toFixed(2)).toFixed(2);
        if (cmpre < 0) {
            alert("Received Qty should be less than or equal to Ordered Qty !");
            currentRow.find("td").eq(4).find(":text").val("");
            currentRow.find("td").eq(4).find(":text").focus();
            return false;
        }
    }
</script>
<script>
    $("#btnSubmit").click(function () {
      

        var totalReceivedQty = $("#hdntotalReceivedQty").val();
       
       
        var vendorName = $("#vendorName").text();
        var poID = $("#hdnPOID").val();
        var inwardType = $("#spnChallanType").val();
        if (inwardType == "") {
             inwardType = "Raw Material";
        }
        else {
             inwardType = $("#spnChallanType").val();
        }
      
        var ginNumber = $("#ginNo").text();
        var vpoNo = $("#pono").text();
        var arrivalDate = $("#poDate").text();
        var heatcode = $("#txtheatcode").val();
        if (heatcode == "") {
            alert("Please Enter Heat Code");
            return false;
        }
        var challan_no = $("#challanNo").val();
        if (challan_no == "") {
            alert("Please Enter Challan Number");
            return false;
        }
        var invoice_no = $("#invoiceNo").val();
        if (invoice_no == "") {
            alert("Please Enter Invoice Number");
            return false;
        }
        var vehicleNo = $("#txtvehicleNo").val();
        var ModeOfTransport = $('input:radio[name="ModeOfTransport"]:checked').val();

        var ModeOfTransportation = $('input:radio[name="ModeOfTransport"]:checked').val();
        if (ModeOfTransportation == "Road") {
            vehicleNo = $("#txtvehicleNo").val();

        } else if (ModeOfTransportation == "Courier") {

            vehicleNo = $("#txtcourierTrackerId").val();
        } else if (ModeOfTransportation == "By Hand") {

            vehicleNo = $("#txtpersonName").val();
        }
        else {
            alert("Please Select The Mode Of Transport");
            return false;
        }
        if (vehicleNo == "") {
            alert("Please Enter Transport Details");
            return false;
        }
        var insertGIDocReceived = $("#GINDOCReceived").val();
        if (insertGIDocReceived == "") {
            alert("Please Select Documents Received !");
            return false;
        }
        var Comment = $("#txtComment").val();
        if (Comment == "") {
            alert("Please Enter Comment");
            return false;
        }

        var partyType = $("#hdnPartyType").val();
        //insertGINDetails(0);
        //return false;
        $.ajax
                                          ({
                                              type: "POST",
                                              url: "../GoodsInward/InsertGIN",
                                              data: JSON.stringify({
                                                  poID: '' + poID + '', vendorName: '' + vendorName + '',
                                                  inwardType: ' ' + inwardType + '', ginNumber: ' ' + ginNumber + '', vpoNo: ' ' + vpoNo + '',
                                                  arrivalDate: ' ' + arrivalDate + '', ModeOfTransportation: ' ' + ModeOfTransport + '',
                                                  challan_no: ' ' + challan_no + '', invoice_no: ' ' + invoice_no + '', vehicleNo: ' ' + vehicleNo + '',
                                                  Comment: '' + Comment + '', heatcode: '' + heatcode + '', partyType: ' ' + partyType + ''
                                              }),
                                              contentType: "application/json;ch,arset=utf-8",
                                              //dataType: "json",
                                              success: function (status) {
                                                  insertDocReceived(status);
                                                  
                                                  //alert("GIN Insert");
                                              },
                                              error: function (err) {
                                                  // alert('Error occured');
                                              }
                                          });
    });

    $("#btnSubmitc").click(function () {

        var CustomerName = $("#customerName").text();
        var inwardType = "Raw Material";
        var ginNumber = $("#ginNo1").text();
        var cpoNo = $("#Customerpono").text();
        var cpoDate = $("#poDate").text();
        var receivedqnt = $("#txt_customerreceivedquantity").val();
        if (receivedqnt == "") {
            alert("Please Enter Received Quantity");
            return false;
        }

        $.ajax
                                          ({
                                              type: "POST",
                                              url: "../GoodsInward/InsertGINCustomer",
                                              data: JSON.stringify({
                                                  vendorName: '' + CustomerName + '',
                                                  inwardType: ' ' + inwardType + '', ginNumber: ' ' + ginNumber + '', vpoNo: ' ' + cpoNo + '',

                                                  receivedqnt: '' + receivedqnt + ''
                                              }),
                                              contentType: "application/json;charset=utf-8",
                                              //dataType: "json",
                                              success: function (status) {
                                                  alert("Goods Inward Generated Successfully!");
                                              },
                                              error: function (err) {
                                                  // alert('Error occured');
                                              }
                                          });
    });
</script>
<script>
    function insertGINDetails(ginId)
    {
        var grade = $("#lblGrade").text();
        var section = $("#lblSection").text();
        var totalReceivedQty = $("#hdntotalReceivedQty").val();
        var x = Number(document.getElementById("tbodymaintable").rows.length) - 1;


        $j("#tbodymaintable").find("tr").each(function (i) {
            var currentRow = $(this).closest("tr");
            var partDesc = currentRow.find("td:eq(0)").text();
            var orderedQty = currentRow.find("td:eq(1)").text();
            var orderedwt = currentRow.find("td:eq(2)").text();
            var challanQty = currentRow.find("td:eq(3)").find(":text").val();
            var receivedQty = currentRow.find("td:eq(4)").find(":text").val();
            //alert(receivedQty);
            var acceptedQty = currentRow.find("td:eq(5)").find(":text").val();
            var remark = currentRow.find("td:eq(6)").find(":text").val();
            var heatcode = currentRow.find("td:eq(7)").find(":text").val();
            var heatnumber = currentRow.find("td:eq(8)").find(":text").val();
            var totalreceivedqnt = $("#hdntotalReceivedQty").val();
            if (isNaN(totalreceivedqnt)) {
                totalreceivedqnt = 0;
            }
           
            totalreceivedqnt = parseFloat(parseFloat(totalreceivedqnt) + parseFloat(receivedQty));

            //  alert(totalreceivedqnt);

            var GinStatus = parseFloat(orderedwt - totalreceivedqnt) == 0 ? true : false;
             //alert(GinStatus);

            $.ajax({
                type: "POST",
                url: "../GoodsInward/InsertGinDetails",
                data: JSON.stringify({
                    ginId: '' + ginId + '', partDesc: '' + partDesc + '', orderedQty: '' + orderedQty + '', orderedwt: '' + orderedwt + '',
                    challanQty: '' + challanQty + '', receivedQty: '' + receivedQty + '', acceptedQty: '' + acceptedQty + '', remark: '' + remark + ''
                    , grade: '' + grade + '', section: '' + section + '', heatcode: '' + heatcode + '', GinStatus: '' + GinStatus + '', heatnumber: '' + heatnumber + ''
                }),
                contentType: "application/json;charset=utf-8",
                // dataType: "json",
                success: function (status) {

                    location.href = "@Url.Action("AllGoodsInward", "GoodsInward")?_inward_type=AllGI";
                    @*if (i==x) {
                                    location.href = "@Url.Action("DCForRMTest", "DCForRMTest")?ginid="+ginId;
                              }*@
                },
                error: function (err) {
                    //alert('Error occured');
                }
            });


        });
    }
</script>
<script type="text/javascript">

    function insertDocReceived(ginId) {

        var id = ginId;

        var insertGIDocReceived = document.getElementsByName('GIDocReceived[]')[0];
        var GIDocReceived = [];
        var GIDocReceivedName = [];
        var GIDocReceivedWithGIN = [];
        var GIDocReceivedWithGINID = [];
        for (i = 0; i < insertGIDocReceived.length; i++) {
            if (insertGIDocReceived.options[i].selected) {
                GIDocReceived.push(insertGIDocReceived.options[i].value);
                GIDocReceivedName.push(insertGIDocReceived.options[i].text);
            }
        }
        var merged = []

        for (i = 0; i < GIDocReceived.length; i++) {
            merged.push(appendArrays(GIDocReceived[i], GIDocReceivedName[i]));
        }


        function appendArrays() {
            var temp = []
            for (var i = 0; i < arguments.length; i++) {
                temp.push(arguments[i]);
            }
            return temp;
        }


        for (var i = 0; i < merged.length; i++) {
            var cube = merged[i];
            var c1 = cube[0];
            var c2 = cube[1];

            GIDocReceivedWithGINID = {
                gin_number: ' ' + parseInt(id) + '', doc_id: ' ' + parseInt(c1) + '', doc_name: '' + (c2)
            }
            GIDocReceivedWithGIN.push(GIDocReceivedWithGINID);

        }
        $.ajax({
            type: "POST",
            url: "../GoodsInward/InsertGIDocReceived",
            data: JSON.stringify(GIDocReceivedWithGIN),
            contentType: "application/json;charset=utf-8",

            success: function (success) {

                uplodFile(ginId);
            },
            error: function (err) {

                alert(err);
            }
        });
    }

</script>
<script>
    function uplodFile(ginId) {
        var fuvalue = $("#fileUpload").val();

        var fileUpload = $("#fileUpload")[0];
        if (fuvalue != "") {
            var files = fileUpload.files;
            var fileData = new FormData();
            for (var i = 0; i < files.length; i++) {
                fileData.append(files[i].name, files[i]);
            }
            fileData.append('ginId', ginId);
            $.ajax({
                type: "POST",
                url: '../GoodsInward/fileupload',
                data: fileData,
                dataType: 'json',
                contentType: false,
                processData: false,
                success: function (response) {
                    insertGINDetails(ginId);
                    
                },
                error: function (error) {

                }
            });
        } else {
            insertGINDetails(ginId);
           
        }

    }
</script>
<script>

    $("#btnViewPrint").click(function () {
        $("#btnDiv").hide();
        $("#btnSubmit").show();
        $("#w3--tab2").show();
        $("#w3--tab2").click();
    });
    $("#w3--tab1").click(function () {
        $("#w3--tab2").hide();
        $("#btnDiv").show();
        $("#btnSubmit").show();
    });

</script>
<script>
    function jsondateformatconvert(jsondate) {
        var MyDate_String_Value = jsondate;
        var value = new Date
        (
        parseInt(MyDate_String_Value.replace(/(^.*\()|([+-].*$)/g, ''))
        );
        var date = value.getDate();
        if (date < 10) {
            date = "0" + date;
        } else {
            date = date;
        }
        var month = value.getMonth() + 1;
        if (month < 10) {
            month = "0" + month;
        } else {
            month = month;
        }
        var year = value.getFullYear();
        var dat = date + "-" + month + "-" + year;
        return dat;
    }
</script>

<script>
    $(document).on("keypress", "input[type=text].Float-Number", function (event) {
        //  $(".Float-Number").keypress(function (event) {
        ///For Positive float
        //if (isNaN(this.value + "" + String.fromCharCode(e.charCode)))
        //    return false;
        $(this).bind("cut copy paste", function (e) {
            e.preventDefault();
        });
        var value = $("#" + this.id).val();
        //    alert(event.which);
        var iKeyCode = (event.which) ? event.which : event.keyCode
        if (iKeyCode != 46 && iKeyCode != 09 && iKeyCode > 31 && (iKeyCode < 48 || iKeyCode > 57)) {
            //  alert("Enter Numbers Only");
            event.preventDefault();
            return false;
        }
        if (event.which < 45 || event.which > 58 || event.which == 47) {
            if (event.which != 8) {
                return false;
                event.preventDefault();
            }
        } // prevent if not number/dot

        if (event.which == 46 && value.indexOf('.') != -1) {
            return false;
            event.preventDefault();
        } // prevent if already dot

        if (event.which == 45 && value.indexOf('-') != -1) {
            return false;
            event.preventDefault();
        } // prevent if already dot

        if (event.which == 45 && value.length > 0) {
            event.preventDefault();
        } // prevent if already -

        return true;


    });
</script>